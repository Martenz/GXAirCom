<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
<meta charset='utf-8'>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Tz Instruments - Settings</title>
</head>
<body>
    <div id="loader_s">        
        <div class="spinner"></div>
    </div>
<h1 class="header"><img src="/images/home.png"/> Instruments: Settings</h1>
<h3>Epaper for GxAirCom</h3>
<p>%VERSION%</p>
<div style="width:100&#37;">

    <hr>
    <div class="centered">

    <table style="width:auto;">
        <tbody>
            <tr>
                <td class="w50">Pilot Name</td>
                <td class="w50">
                    <input id="pilot_name" type="text" maxlength="20">
                    <button id="save_pilot_name" class="button">Set</button>
                </td>
            </tr>
            <tr>
                <td class="w50">UTC Offset<br>(-12..+14)</td>
                <td class="w50">
                    <input type="number" id="utc_offset" value="1" min="-12" max="14" onchange="validity.valid||(value='1');">
                </td>
            </tr>
            <tr>
                <td class="w50">Speaker Volume 
                    <!-- <br>[<small id="spk_vol"></small>] -->
                </td>
                <td class="w50">
                    <select id="volume" class="w100">
                        <option hidden selected>Choose</option>
                        <option value=0>OFF</option>
                        <option value=15>Low</option>
                        <option value=55>Medium</option>
                        <!-- <option value=125>75&#37;</option> -->
                        <option value=255>High</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="2"><a href="/vario_curve" target="_self"><button class="button w100">Vario Sound Curve</button></a></tr>
            </tr>
            <tr>
                <td class="w50">Display Orientation
                    <!-- <br>[<small id="spk_vol"></small>] -->
                </td>
                <td class="w50">
                    <select id="rotation" class="w100">
                        <option hidden selected>Choose</option>
                        <option value=0>0 째</option>
                        <option value=1>90 째</option>
                        <option value=2>180 째</option>
                        <option value=3>270 째</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td class="w50">Display refresh timer <br>(1-30 minutes)</td>
                <td class="w50">
                    <input type="number" id="t_refresh" value="3" min="1" max="30" oninput="validity.valid||(value='3');">
                </td>
            </tr>
            <tr>
                <td class="w50">Beep only when flying</td>
                <td class="w50">
                    <input type="checkbox" id="beep_when_f">
                </td>
            </tr>
            <tr>
                <td class="w50">Flying Min Speed <br>(5-15km/h)</td>
                <td class="w50">
                    <input type="number" id="fly_min_v" value="6" min="5" max="15" onchange="validity.valid||(value='6');">
                </td>
            </tr>
            <tr>
                <td class="w50">Flying Min Time <br>(5-60s)</td>
                <td class="w50">
                    <input type="number" id="fly_min_t" value="5" min="5" max="60" onchange="validity.valid||(value='5');">
                </td>
            </tr>
            <tr>
                <td class="w50">Flying Stop Time <br>(10-120s)</td>
                <td class="w50">
                    <input type="number" id="fly_stop_t" value="30" min="10" max="120" onchange="validity.valid||(value='30');">
                </td>
            </tr>   
            <tr>
                <td class="w50">Min Satellites number default 4, increase for better wind direction computation.
                    <br>(4-8)</td>
                <td class="w50">
                    <input type="number" id="min_sat_av" value="5" min="4" max="8" oninput="validity.valid||(value='5');">
                </td>
            </tr>      
            <tr>
                <td class="w50">Reinitialize GPS module</td><td class="w50"><button id="restart_gps" class="button w100">Reset</button></td>
            </tr>
            <!-- <tr>
                <td class="w50">Change Gps Hz
                </td>
                <td class="w50">
                    <select id="gps_frq" class="w100">
                        <option hidden selected>Choose</option>
                        <option value=1>1 Hz</option>
                        <option value=5>5 Hz</option>
                        <option value=10>10 Hz</option>
                        <option value=16>16 Hz</option>
                    </select>
                </td>
            </tr>                            -->
            <tr>
                <td class="w50">WiFi Off after
                    <br>[<small id="wifi_countdown_min"></small>:<small id="wifi_countdown_sec"></small></ll>]
                </td>
                <td class="w50">
                    <select id="wifi_timer" class="w100">
                        <option hidden selected>Choose</option>
                        <option value=3>3 min.</option>
                        <option value=5>5 min.</option>
                        <option value=10>10 min.</option>
                        <option value=30>30 min.</option>
                        <option value=0>ALWAYS ON</option>
                    </select>
                </td>
            </tr>
        </tbody>
    </table>
    <!-- <a href="https://stackoverflow.com/questions/59118310/how-to-send-string-to-esp32-using-http" target="_blank">Doc link</a> -->
    <hr>
    <table style="width:auto;">
        <tbody>
        <tr>
            <td class="w50">Export All Settings (including Vario page settings)</td>
            <td class="w50">
                <a href="/export-settings" download target="_blank"><button class="button w100">Download</button></a>
            </td>
        </tr>
        <tr>
            <td class="w50 top">
                Import All Settings (including Vario page settings)
                <p style="color:red;">IMPORTANT NOTE! you can edit settings directly in the exported json file 
                    but do not remove any key or change key names before uploading
                    otherwise the device will not start properly.
                </p>
            </td>
            <td class="w50">
                <form method="POST" action="/import-settings" enctype="multipart/form-data"><input type="file" name="data"/><input type="submit" name="upload" value="Upload" title="Upload File"></form>
                <p>After clicking upload it will take some time for the file to firstly upload and then be written to SPIFFS, there is no indicator that the upload began.  Please be patient.</p>
                <p>Then restart device to apply imported configuration.</p>
            </td>
        </tr>
        <tr>
            <td colspan="2"><button id="restart" class="button w100">Restart TzI Epaper</button></td>
        </tr>
    </tbody>
    </table>
    </div>
    <hr>
</div>
<a class="button" href="/">Home</a>
<footer>
    <hr>
    <p>Developed by %DEVELOPERINFO%<br>Last Update: %BUILD_TIMESTAMP%</p>
</footer>
</body>
<script src="settings.js"></script>
</html>