<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="vario.css">
<meta charset='utf-8'>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Tz Instruments - Vario Curve</title>
</head>
<body>
    <div id="loader_s">        
        <div class="spinner"></div>
    </div>
<h1 class="header"><img src="/images/home.png"/> Instruments</h1>
<h3>Vario Curve</h3>
<p>%VERSION%</p>
<div style="width:100&#37;">
    <hr>
    <h3>On and Off limits for Vario sounds</h3>
    <table style="width:auto;margin:auto;">
    <tr> 
        <td>Sink Start Beep [m/s]:</td>
        <td>
            <input type="number" id="sink_on" value="-2.5" min="-10" max="0" step="0.1" onfocusout="validity.valid||(value='-2.5');">
        </td>
    </tr>
    <tr> 
        <td>Lift Start Beep [m/s]:</td>
        <td>
            <input type="number" id="lift_on" value="0.5" min="-10" max="10" step="0.1" onfocusout="validity.valid||(value='0.5');">
        </td>
    </tr>
    </table>    
    <hr>
    <h3>Vario Curve Editor</h3>
    <button id="play" class="button w100 legend">Test</button>
    <select id="default_curves" class="w100 legend">
        <option hidden selected>Choose</option>
        <option value=0>Default</option>
        <option value=1>Zero Floating Buzz</option>
        <option value=2>Zero Floating Buzz Opt</option>
        <option value=3>Gengio's Style</option>
    </select><br>
    <button id="export_vario" class="button w100 legend">Export Curve</button>
    <button id="import_vario" class="button w100 legend" disabled>Import Curve</button>
    <input type="file" id="selectFiles" value="Import" /><br />
    <br>
    <p>If you want to add more points to the curve, export to json file edit and import the new curve.</p>
    <br>
    <div>
        <button id="slider_vario_dw" class="slider-btn"><</button>
        <input type="range" name="vval_demo" id="vval_demo" value="0" min="-10" max="10" step="0.1" oninput="ageOutputId.value = vval_demo.value">
        <button id="slider_vario_up" class="slider-btn">></button>
        <output name="ageOutputName" id="ageOutputId">0</output>
    </div>
    <br>
    <table id="graph" class="graph"></table>
    <div>
        <div class="legend vval">m/s</div>
        <div class="legend frq">Freq. Hz</div>
        <div class="legend ton">Length ms</div>
        <div class="legend toff">Pause ms</div>
    </div>
    <hr>
    <h3>Kalman Filter on Barometric Atitude and Computed Variometer</h3>
    <table style="width:auto;margin:auto;">
    <tr> 
        <td>Vario Kalman filter - Measurement Uncertainty [default 0.3]:</td>
        <td>
            <input type="number" id="kalman_e_mea" value="0.3" min="0.1" max="1" step="0.1" onfocusout="validity.valid||(value='0.3');">
        </td>
    </tr>
    <tr> 
        <td>Vario Kalman filter - Estimation Uncertainty [default 0.3]:</td>
        <td>
            <input type="number" id="kalman_e_est" value="0.3" min="0.1" max="1" step="0.1" onfocusout="validity.valid||(value='0.3');">
        </td>
    </tr>
    <tr> 
        <td>Vario Kalman Filter - Process Noise [default 0.1]:</td>
        <td>
            <input type="number" id="kalman_q" value="0.1" min="0.05" max="1" step="0.05" onfocusout="validity.valid||(value='0.1');">
        </td>
    </tr>
    </table>
    <hr>
    <h3>Variometer Averaging ms - Eink & Buzzer</h3>
    <table style="width:auto;margin:auto;">
    <tr> 
        <td>Averaging ms EINK [50..5000]:</td>
        <td>
            <input type="number" id="vario_avg_ms" value="250" min="50" max="5000" step="50" onfocusout="validity.valid||(value='250');">
        </td>
        <td>Averaging ms Buzzer [50..5000]:</td>
        <td>
            <input type="number" id="vario_avg_ms_b" value="250" min="50" max="5000" step="50" onfocusout="validity.valid||(value='250');">
        </td>
    </tr>
    <tr>
        <td>Detect Thermals and average vario value <br> both Buzzer and Eink</td>
        <td class="center">
            <input type="checkbox" id="thermal_detect">
        </td>
        <td>Avgraging ms Buzzer while thermalling [50..5000]</td>
        <td>
            <input disabled type="number" id="thermal_avg" value="1000" min="50" max="5000" step="50" onfocusout="validity.valid||(value='1000');">
        </td>
    </tr>
    </table>
    <hr>

</div>
<button id="save_vario" class="button w80">Save & Restart</button>
<a class="button" href="/">Home</a>
<footer>
    <p>Developed by %DEVELOPERINFO%<br>Last Update: %BUILD_TIMESTAMP%</p>
</footer>
<script src="vario.js"></script>
</body>
</html>